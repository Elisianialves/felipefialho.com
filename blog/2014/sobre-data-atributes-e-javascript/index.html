<!DOCTYPE html>
<html lang="pt" class="no-js">
<head>
	<!-- Standard Meta -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="viewport" content="width=device-width" />

	<meta property="og:title" content="Sobre Data Atributes e Javascript | Luiz Felipe Tartarotti Fialho - Desenvolvedor Front-End" />
	<meta property="og:type" content="blog" />
	<meta property="og:url" content="http://www.felipefialho.com.br/" />
	<meta property="og:image" content="/assets/img/default/luiz-felipe-tartarotti-fialho.png"/>


	<!-- Site Properities -->
	<title>Sobre Data Atributes e Javascript | Luiz Felipe Tartarotti Fialho - Desenvolvedor Front-End</title>
	<meta name="description" content="Site para Desenvolvedores Front-End, com dicas do mercado web, tutoriais e projetos na qual participei." />
	<meta name="keywords" content="Desenvolvedor Front-End, Front-End, Desenvolvimento Front-End, HTML, CSS, Javascript, Tableless, Bootstrap, Desenvolvimento Web, Front-End Developer, HTML5, CSS3, Jquery, Front-End, Front-End Engineer, LESS, CSS Components" />

	<!-- Meta -->
	<meta http-equiv="X-Powered-By" content="DocPad v6.38.1"/>

	<!-- Styles -->
	<link  rel="stylesheet" href="/assets/css/style.css" />

	<!-- Favicon -->
	<link rel="shortcut icon" href="/assets/img/icons/favicon2.ico" />
</head>
<body>
	<div class="row-fluid">

		<!-- SIDE -->
		<aside class="span3">
			<div class="navbar nav-side">
				<!-- HEADER -->
				<header itemscope itemtype="http://schema.org/Person">
					<div class="photo">
						<img src="/assets/img/default/luiz-felipe-tartarotti-fialho.png" alt="Cartoon de Luiz Felipe Tartarotti Fialho" itemprop="image" height="151" width="100">
					</div>
					<h1 class="logo">
						<a href="/" itemprop="additionalName">Felipe Fialho</a>
					</h1>
					<h4 itemprop="jobTitle">Desenvolvedor Front-End</h4>
				</header>
				<!-- END HEADER -->
				<!-- NAV -->
							<label for="collapse-menu" class="btn btn-navbar">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</label>

			<!-- NAVIGATION -->
      <input class="collapse-open" type="checkbox" id="collapse-menu" aria-hidden="true" hidden>
			<nav class="nav-collapse">
				<hr>
				<ul class="nav nav-pills nav-stacked" role="navigation">
					 
				      <li class="nav-list-item">
				        <a href="../../../blog/">Blog</a>
				      </li>
				    
				      <li class="nav-list-item">
				        <a href="../../../projetos/">Projetos</a>
				      </li>
				    
				      <li class="nav-list-item">
				        <a href="../../../portfolio/">Portfolio</a>
				      </li>
				    
				</ul>
				<hr>
				<!-- SOCIAL MEDIA -->
				<ul class="social-media inline">
					<li><a href="/feed.xml"><span class="icon-feed" aria-hidden="true"></span></a></li>
					<li><a href="https://www.facebook.com/LFehh"><span class="icon-facebook" aria-hidden="true"></span></a></li>
					<li><a href="https://twitter.com/LFeh"><span class="icon-twitter" aria-hidden="true"></span></a></li>
					<li><a href="https://github.com/LFeh"><span class="icon-github-2" aria-hidden="true"></span></a></li>
					<li><a href="http://www.linkedin.com/in/lfehfrontend"><span class="icon-linkedin" aria-hidden="true"></span></a></li>
					<li class="hide"><a href="https://plus.google.com/101721187531748531230?rel=author">Google +</a></li>
				</ul>
				<!-- END OF SOCIAL MEDIA -->
				<hr>
				<!-- TRANSLATE -->
				<ul class="translate inline">
					<li><a href="/en/">View in English</a></li>
				</ul>
				<!-- END OF TRANSLATE -->
			</nav>
			<!-- END NAVIGATION -->
				<!-- END NAV -->
			</div>
		</aside>
		<!-- END SIDE -->
		<section class="wrap span9">
			<article class="main" role="main">
				<section itemscope itemtype="https://schema.org/Blog">
  <h1 class="page-header"><a href="../../">Blog</a></h1>

  <span class="date" itemprop="datePublished">08/07/2014</span>
  <h2 itemprop="headline">Sobre Data Atributes e Javascript</h2>
  <span class="author">Por: <a href="https://plus.google.com/101721187531748531230?rel=author" itemprop="author">Luiz Felipe Tartarotti Fialho</a></span>

  <div class="post-container">

  	<div class="share-block">
  		<!-- AddThis Button BEGIN -->
  		<div class="addthis_toolbox addthis_default_style">
  			<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  			<a class="addthis_button_tweet"></a>
  			<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  		</div>
  		<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
  		<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51124ac82d52f270"></script>
  		<!-- AddThis Button END -->

  	</div>

  	<article class="post" itemprop="blogPost">
  		<p class="lead">Nos últimos projetos comecei a testar o uso do [data-*] do HTML5 como seletor no Javascript. Agora vou listar algumas coisas que observei com essa prática.</p>

<h3>O que é?</h3>

<p>A <a href="http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes">W3C</a> diz o seguinte:</p>

<p><cite><em>"A custom Data Atributes is an attribute in no namespace whose name starts with the string "data-", has at least one character after the hyphen, is XML-compatible, and contains no uppercase ASCII letters."</em></cite></p>

<p>Ou seja, através do atributo data você pode armazenar e recuperar dados. Com isso você guarda pequenas informações de texto e pode manipular através de Javasript.</p>

<p>Como podemos criar qualquer atributo através do prefixo <code>[data-*]</code>, esses atributos tem sido utilizados também para iniciar funções.</p>

<h3>Como funciona?</h3>

<p>Ao invés de acessar o elemento via Javascript através de <code>.classe</code> ou <code>#id</code>, podemos usar os <code>[data-attributes]</code> do HTML5.</p>

<p>Por exemplo (em jQuery) para iniciar uma interação de “swipe” em um menu, podemos chamar via <code>.classe</code>:</p>

<code>swipeTouchMenuList('.nav-aside');</code>

<p>Ou via <code>#id</code>:</p>

<code>swipeTouchMenuList('#nav-touch');</code>

<p>Mas a ideia aqui é fazer a chamada via <code>[data-*]</code>:</p>

<code>swipeTouchMenuList('[data-toggle="nav-touch"]');</code>

<h3>Por que usar dessa forma? </h3>

<p>O principal motivo, é para separar o estilo da funcionalidade Javascript. Apresento a seguir um cenário real de aplicação.</p>

<ol>
  <li>
    <p>Imaginem novamente o menu do exemplo acima, ele apresenta uma função para
interação em “swipe” em telas Touch. Então chamamos a função, atribuindo em todas a classes <code>.nav-aside</code>:</p>
    <code>swipeTouchMenuList('.nav-aside');</code>
    </li>
    <li>
      <p>Porém, em uma das páginas. O menu apresenta o mesmo estilo, mas não deveria ter essa funcionalidade de swipe. Poderíamos atribuir a interação a um #id e adicionar o id nos elementos que devem apresentar esse comportamento.</p>
      <code>swipeTouchMenuList('#nav-touch'); </code>
    </li>
    <li>
      <p>Para complicar mais, esse menu aparece duas vezes em outra página, porém como sabemos, não podemos repetir um #id na mesma página. E fazer a chamada para cada #id separadamente também não é uma solução adequada.</p>
      <p>Poderíamos então usar uma classe sem estilo, que serviria somente para a chamada no Javascript, algo como:</p>
      <code>swipeTouchMenuList('.js.nav-touch);</code>
      <p>Essa é uma solução viável e funcional, mas manter as classes apenas para estilização no CSS seria mais elegante.</p>
    </li>
    <li>
      <p>Então finalmente, podemos usar o [data-*] para isso. </p>
      <code>swipeTouchMenuList('[data-toggle="nav-touch"]');</code>
      <p>Dessa forma, basta adicionar [data-toggle="nav-touch"] ao elemento que deve apresentar esse comportamento.</p>
    </li>
</ol>

<h4>Através de CSS...</h4>

<p>E claro, também é possível manipular os Data Atributes através de CSS, portanto, podemos adicionar animações ou algum estilo específico:</p>

<code><pre>.nav-aside[data-toggle="nav-touch"] {
  ...
}</pre></code>

<h3>Na prática!</h3>

<p>Para mostrar em funcionamento, criei uma base de código bem rápida (peço que desconsiderem a qualidade do mesmo :p) e imaginei o seguinte cenário:</p>

<ol>
  <li>Uma página que vai apresentar dois menus idênticos visualmente</li>
  <li>Um deles servirá como filtro para tags usando um plugin de "tabs"</li>
  <li>O outro será um menu comum com link para outras páginas</li>
</ol>

<p>Em funcionamento:</p>

<iframe width="100%" height="300" src="http://jsfiddle.net/LFeh/5Qr7b/2/embedded/result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p>Ou seja, para ativar o plugin de "tabs", simplesmente usei <code>[data-toggle="tab"]</code>, evitando assim atrelar o plugin na classe de estilo <code>.nav</code> ou adicionar uma classe extra apenas para chamar a função.</p>

<h3>E a performance?</h3>

<p>Fazendo um pequeno teste no <a href="http://jsperf.com/long-selectors-vs-data/17">jsPerf</a>, podemos observar que:</p>

<ul>
  <li>Seletor <code>.classe</code> apresenta de longe o melhor resultado, com uma média de <b>130.000</b> operações por 0,063 segundos</li>
  <li>Seletores <code>[data-*]</code> são até 88% mais lentos do que os de <code>.classe</code>, com uma média de 'apenas' <b>18.000</b> operações por 0,063 segundos</li>
</ul>

<h3>Conclusão</h3>

<p>Usar o <code>[data-*]</code> para separar estilização e comportamento é uma solução bastante elegante e funcional. Se bem utilizada, acredito em um ganho importante de escalabilidade nos componentes.</p>

<p>Porém existem problemas com relação a performance. Uma diferença negativa de 88% com relação aos seletores <code>.classe</code> não é algo que deve ser ignorado.</p>

<p>Como em todos os projetos, vale uma análise prévia. Acredito que apenas em aplicações realmente grandes essa diferença seria notada. Portanto minha indicação seria de usar sem medo em projetos menores, e realizar testes para verificar o impacto na performance de projetos maiores.</p>
  	</article>

  	<div class="share-block">
  		<!-- AddThis Button BEGIN -->
  		<div class="addthis_toolbox addthis_default_style">
  			<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
  			<a class="addthis_button_tweet"></a>
  			<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  		</div>
  		<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
  		<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51124ac82d52f270"></script>
  		<!-- AddThis Button END -->
  	</div>

  </div>

  <div class="comments" itemprop="comment">
  	  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'felipefialho'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Por favor habilite o javascript para ver os <a href="http://disqus.com/?ref_noscript">comentários do Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
  </div>
</section>
			</article>
		</section>
	</div>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-40410936-1', 'felipefialho.com');
	  ga('send', 'pageview');

	</script>

</body>
</html>