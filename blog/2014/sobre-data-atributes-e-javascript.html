<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Nos últimos projetos comecei a testar o uso do [data-*] do HTML5 como seletor no JavaScript. Agora vou listar algumas coisas que observei com essa prática."><title>Sobre Data Atributes e JavaScript | Felipe Fialho - Front-End Developer</title><meta property="og:title" content="Sobre Data Atributes e JavaScript"><meta property="og:description" content="Nos últimos projetos comecei a testar o uso do [data-*] do HTML5 como seletor no JavaScript. Agora vou listar algumas coisas que observei com essa prática."><meta property="og:image" content="http://www.felipefialho.com/assets/img/blog/cover/undefined"><meta property="og:url" content="http://www.felipefialho.com/blog/2014/sobre-data-atributes-e-javascript"><meta name="twitter:card" content="photo"><meta name="twitter:site" content="Felipe Fialho - Blog"><meta name="twitter:title" content="Sobre Data Atributes e JavaScript"><meta name="twitter:image" content="http://www.felipefialho.com/assets/img/blog/cover/undefined"><meta name="twitter:url" content="http://www.felipefialho.com/blog/2014/sobre-data-atributes-e-javascript"><link rel="alternate" type="application/rss+xml" title="Felipe Fialho - Front-End Developer RSS" href="/rss.xml"><link rel="apple-touch-icon" sizes="57x57" href="/assets/favicon/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/favicon/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/favicon/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/favicon/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/favicon/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/favicon/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/favicon/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/favicon/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/favicon/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon/assets/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/assets/favicon-16x16.png"><link rel="manifest" href="/assets/favicon/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/favicon/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/css/style.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-40410936-1', 'auto');
ga('send', 'pageview');</script></head></html><body><header role="banner" class="header"><div class="header__container"><a href="/" role="logo" class="brand"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 30"><path d="M0 8.5h2.6V7.4c0-3.3 1.4-6.2 5.5-6.2 1.2 0 2.4.3 3.1.8l-1 2c-.6-.3-1.2-.5-2.1-.5-2.5 0-2.9 1.2-2.9 3.9v1.1h3.9v2.3H5.2v11.8H2.6V10.8H0V8.5zM22.6 20.6C21 22.2 19.3 23 16.8 23c-2 0-3.5-.6-4.5-1.5-1.2-1.2-1.8-2.8-1.8-5.6 0-2.3.4-4.7 1.7-6.2.9-1.1 2.4-1.9 4.7-1.9 4.2 0 5.8 2.8 5.8 6.2 0 .5 0 1.2-.1 1.8l-9.3.1c.1 3 .5 4.9 3.5 4.9 1.8 0 3.2-.6 4.3-1.8l1.5 1.6zm-2.5-6.9c0-2.4-.5-3.8-3.1-3.8-2.7 0-3.4 1.5-3.6 3.8h6.7zM28.4.3v22.3h-2.6V.3h2.6zM35.1 8.1v14.6h-2.6V8.1h2.6zM41.6 8.1v2.6c.9-1.8 2.8-2.9 4.8-2.9 1.5 0 2.6.6 3.3 1.4 1.3 1.4 1.7 3.7 1.7 6 0 2.7-.5 5.1-2.1 6.5-.9.8-2.2 1.3-3.8 1.3-1.4 0-3-.4-4-1.8v8.5H39V8.1h2.6zm1.4 3.5c-1 1.3-1.4 2.9-1.4 4.6 0 1.4.2 2.6.9 3.4.6.7 1.6 1.1 2.9 1.1 2.5 0 3.3-1.6 3.3-5.4 0-3.6-.8-5.2-2.7-5.2-1.2 0-2.3.5-3 1.5zM66.2 20.6c-1.6 1.6-3.3 2.4-5.8 2.4-2 0-3.5-.6-4.5-1.5-1.2-1.2-1.8-2.8-1.8-5.6 0-2.3.4-4.7 1.7-6.2.9-1.1 2.4-1.9 4.7-1.9 4.2 0 5.8 2.8 5.8 6.2 0 .5 0 1.2-.1 1.8l-9.3.1c.1 3 .5 4.9 3.5 4.9 1.8 0 3.2-.6 4.3-1.8l1.5 1.6zm-2.5-6.9c0-2.4-.5-3.8-3.1-3.8-2.7 0-3.4 1.5-3.6 3.8h6.7zM75 8.5h2.6v-1c0-3.5 1.2-6.4 6.6-6.4 2 0 3.5.4 4.8 1.3l-1 2c-1.1-.7-2.3-1-4-1-3.4 0-3.8 1.4-3.8 4v1.1H89v14.1h-2.6V10.8h-6.1v11.8h-2.6V10.8H75V8.5zM92.4 9.8c1.4-1.5 3.2-2 5.3-2 3.6 0 5.5 1.5 5.5 5.3v9.5h-2.4v-2.4c-1 1.9-2.8 2.8-4.7 2.8-1.3 0-2.4-.4-3.1-1.1-.8-.7-1.2-1.8-1.2-3.1 0-1.7.6-2.7 1.7-3.5 1.3-.9 3-1.2 5.1-1.2h2.1v-.7c0-2.5-.8-3.3-3-3.3-1.6 0-2.7.4-3.8 1.5l-1.5-1.8zm5.9 6.2c-2.3 0-3.8.4-3.8 2.6 0 1.4.5 2.2 2 2.2 1.9 0 4.1-1.4 4.2-4.8h-2.4zM109.3.3v22.3h-2.6V.3h2.6zM115.6.3v10.6c.6-1.8 2.3-3.2 4.6-3.2 2.7 0 4.2 1.8 4.2 4.8v10.1h-2.6V13c0-1.9-.5-2.9-2-2.9-2.1 0-4.2 2-4.2 7.4v5.1H113V.3h2.6zM138.2 21.1c-1.1 1.2-2.5 1.9-4.8 1.9-2.2 0-3.6-.7-4.6-1.8-1.3-1.4-1.6-3.1-1.6-5.6 0-2.7.4-4.5 1.8-6 1.1-1.2 2.6-1.9 4.8-1.9 2.2 0 3.6.7 4.6 1.8 1.3 1.4 1.6 3.2 1.6 5.7 0 2.6-.4 4.3-1.8 5.9zm-2-10.2c-.5-.5-1.2-.9-2.6-.9-1.5 0-2.2.5-2.6 1-.8 1-1.1 2.7-1.1 4.5 0 2.1.3 3.4 1 4.3.4.5 1.3.9 2.5.9 1.5 0 2.2-.5 2.7-1 .8-1 1.1-2.6 1.1-4.4.1-1.9-.2-3.5-1-4.4z"/></svg>
</a><nav class="navbar"><label for="navbar" class="navbar--btn"><svg aria-label="Menu" class="icon"><use xlink:href="/assets/svg/icons.svg#menu"></use></svg></label><input id="navbar" type="checkbox" class="nav--open"/><ul role="navigation" class="nav"><li class="nav__item"><a href="/blog" class="nav--link active">Blog</a></li><li class="nav__item"><a href="/projects" class="nav--link">Projects</a></li><li class="nav__item"><a href="/labs" class="nav--link">Labs</a></li></ul></nav><ul class="social-media"><li><a href="http://twitter.com/LFeh" title="View my Twitter" target="_blank"><svg aria-label="Twitter" class="icon"><use xlink:href="/assets/svg/icons.svg#twitter"></use></svg></a></li><li><a href="https://www.facebook.com/LFehh" title="View my Facebook" target="_blank"><svg aria-label="Facebook" class="icon"><use xlink:href="/assets/svg/icons.svg#facebook"></use></svg></a></li><li><a href="https://www.linkedin.com/in/lfehfrontend" title="View my Linkedin" target="_blank"><svg aria-label="Linkedin" class="icon"><use xlink:href="/assets/svg/icons.svg#linkedin"></use></svg></a></li><li><a href="https://github.com/lfeh" title="View my Github" target="_blank"><svg aria-label="Github" class="icon"><use xlink:href="/assets/svg/icons.svg#github"></use></svg></a></li><li><a href="https://codepen.io/lfeh" title="View my Codepen" target="_blank"><svg aria-label="Codepen" class="icon"><use xlink:href="/assets/svg/icons.svg#codepen"></use></svg></a></li><li class="hidden"><a href="https://plus.google.com/101721187531748531230?rel=author" title="View my Google Plus" target="_blank"><svg aria-label="Google Plus" class="icon"><use xlink:href="/assets/svg/icons.svg#google"></use></svg></a></li></ul></div></header><main role="main" class="main"> <article itemscope="itemscope" itemtype="http://schema.org/Blog" lang="pt-br" class="blog__article"><div class="blog__header"><div class="content"><span itemprop="author" class="sr-only">Luiz Felipe Tartarotti Fialho</span><time itemprop="dateCreated" class="date">08/07/2014</time><h1 itemprop="name">Sobre Data Atributes e JavaScript</h1><p itemprop="description">Nos últimos projetos comecei a testar o uso do [data-*] do HTML5 como seletor no JavaScript. Agora vou listar algumas coisas que observei com essa prática.</p></div></div><div class="blog__inner"><div itemprop="text" class="content"><h2>O que é?</h2><p>A <a href="http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes">W3C</a> diz o seguinte:</p>
<blockquote>
  <cite>A custom Data Atributes is an attribute in no namespace whose name starts with the string &quot;data-&quot;, has at least one character after the hyphen, is XML-compatible, and contains no uppercase ASCII letters.</cite>
</blockquote>

<p>Ou seja, através do atributo data você pode armazenar e recuperar dados. Com isso você guarda pequenas informações de texto e pode manipular através de Javasript.</p>
<p>Como podemos criar qualquer atributo através do prefixo <code>[data-*]</code>, esses atributos tem sido utilizados também para iniciar funções.</p>
<h2>Como funciona?</h2><p>Ao invés de acessar o elemento via JavaScript através de <code>.class</code> ou <code>#id</code>, podemos usar os <code>[data-attributes]</code> do HTML5.</p>
<p>Por exemplo (em jQuery) para iniciar uma interação touch em um menu, podemos chamar via <code>.class</code>:</p>
<pre><code class="language-js">$(&#39;.nav&#39;);
</code></pre>
<p>Ou via <code>#id</code>:</p>
<pre><code class="language-js">$(&#39;#nav&#39;);
</code></pre>
<p>Mas a ideia aqui é fazer a chamada via <code>[data-*]</code>:</p>
<pre><code class="language-js">$(&#39;[data-trigger=&quot;nav-touch&quot;]&#39;);
</code></pre>
<h2>Por que usar dessa forma?</h2><p>O principal motivo, é para separar o estilo da funcionalidade JavaScript. Apresento a seguir um cenário real de aplicação.</p>
<p>Imaginem novamente o menu do exemplo acima, ele apresenta uma função para interação em <em>swipe</em> em telas Touch. Então chamamos a função, atribuindo em todas a classes <code>.nav</code>:</p>
<pre><code class="language-js">$(&#39;.nav&#39;);
</code></pre>
<p>Porém, em uma das páginas. O menu precisa ter o mesmo estilo, mas não deveria ter essa funcionalidade de <em>swipe</em>. Poderíamos atribuir a interação a um #id e adicionar o id nos elementos que devem apresentar esse comportamento.</p>
<pre><code class="language-js">$(&#39;#nav-touch&#39;);
</code></pre>
<p>Para complicar mais, esse menu aparece duas vezes em outra página, porém como sabemos, não podemos repetir um #id na mesma página. E fazer a chamada para cada #id separadamente também não é uma solução adequada.</p>
<p>Poderíamos então usar uma classe sem estilo, que serviria somente para a chamada no JavaScript, algo como:</p>
<pre><code class="language-js">$(&#39;.js-nav-touch&#39;);
</code></pre>
<p>Essa é uma solução viável e funcional, mas manter as classes apenas para estilização no CSS seria mais elegante.</p>
<p>Então finalmente, podemos usar o [data-*] para isso.</p>
<pre><code class="language-js">$(&#39;[data-trigger=&quot;nav-touch&quot;]&#39;);
</code></pre>
<p>Dessa forma, basta adicionar [data-trigger=&quot;nav-touch&quot;] ao elemento que deve apresentar esse comportamento.</p>
<h3>Através de CSS...</h3><p>E claro, também é possível manipular os Data Atributes através de CSS, portanto, podemos adicionar animações ou algum estilo específico:</p>
<pre><code class="language-css">.nav[data-trigger=&quot;nav-touch&quot;] {
  ...
}
</code></pre>
<h2>Na prática!</h2><p>Para mostrar em funcionamento, criei uma base de código bem rápida (peço que desconsiderem a qualidade do mesmo :p) e imaginei o seguinte cenário:</p>
<ol>
<li>Uma página que vai apresentar dois menus idênticos visualmente</li>
<li>Um deles servirá como filtro para tags usando um plugin de &quot;tabs&quot;</li>
<li>O outro será um menu comum com link para outras páginas</li>
</ol>
<h3>Em funcionamento:</h3><iframe width="100%" height="500" src="http://jsfiddle.net/LFeh/5Qr7b/2/embedded/result" allowfullscreen="allowfullscreen" frameborder="0"></iframe>

<p>Ou seja, para ativar o plugin de <strong>tabs</strong>, simplesmente usei <code>[data-toggle=&quot;tab&quot;]</code>, evitando assim atrelar o plugin na classe de estilo <code>.nav</code> ou adicionar uma classe extra apenas para chamar a função.</p>
<h2>E a performance?</h2><p>Fazendo um pequeno teste no <a href="http://jsperf.com/long-selectors-vs-data/17">jsPerf</a>, podemos observar que:</p>
<ul>
<li>Seletor <code>.class</code> apresenta de longe o melhor resultado, com uma média de <strong>130.000</strong> operações por 0,063 segundos</li>
<li>Seletores <code>[data-*]</code> são até 88% mais lentos do que os de <code>.class</code>, com uma média de &#39;apenas&#39; <strong>18.000</strong> operações por 0,063 segundos</li>
</ul>
<h2>Conclusão</h2><p>Usar o <code>[data-*]</code> para separar estilização e comportamento é uma solução bastante elegante e funcional. Se bem utilizada, acredito em um ganho importante de escalabilidade nos componentes.</p>
<p>Porém existem problemas com relação a performance. Uma diferença negativa de 88% com relação aos seletores <code>.class</code> não é algo que deve ser ignorado.</p>
<p>Como em todos os projetos, vale uma análise prévia. Acredito que apenas em aplicações realmente grandes essa diferença seria notada. Portanto minha indicação seria de usar sem medo em projetos menores, e realizar testes para verificar o impacto na performance de projetos maiores.</p></div><div class="share"><div class="addthis_sharing_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-51124ac82d52f270"></script></div><aside class="comments"><div id="disqus_thread"></div><script>(function() {
var d = document, s = d.createElement('script');
s.src = '//felipefialho.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script><script id="dsq-count-scr" src="//felipefialho.disqus.com/count.js" async="async"></script></aside></div></article></main><script src="/assets/js/main.js"></script></body>